<!--
  Generated template for the UserPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title></ion-title>
    <ion-buttons end >
      <button ion-button icon-only (click)="doLogout()">
        <ion-icon name="exit"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content padding class="ionContent"> 

  <!-- <div class="north">
    <img class="profile-photo" src="assets/imgs/user/profile_picture_example.jpg"> 
  </div>
    -->
  <ng-progress class="ng-progress" [color]="'#31edda'"></ng-progress>
  
  <div>
    <ion-item class="content">
      <ion-row>
        <ion-col style="white-space:normal" col-9>
          {{userProvider.user.person_name}}
        </ion-col>
        <ion-col style="white-space:normal" col-3>
          {{userProvider.user.job_name}}
        </ion-col>
      </ion-row>
    </ion-item>
  </div>
 
  
  <ion-row class="headerSprint">
    <ion-col>Your Claimed Sprint</ion-col>
  </ion-row>

  <ion-list [virtualScroll]="userProvider.claimedSprintDetailList">
    <ion-item-sliding *virtualItem="let data"> 
      <button ion-item class="ionItem" (click)="onItemPressed({data : data})"  
                [ngStyle]="{'background-color' :getColor(data.statusSprint)}">
        <ion-row>
          <ion-col style="white-space:normal" col-4>
            {{data.sprint_id}}sdfgsdfgdsfg
          </ion-col>
          <ion-col style="white-space:normal" col-4>
            {{data.duration}} Hours
          </ion-col>
          <ion-col style="white-space:normal" col-4>
            {{data.statusSprint}}
          </ion-col>
        </ion-row>
      </button>
      <ion-item-options>
        <section *ngIf="data.statusSprint == 'To do'">
          <button ion-button color="light" (click)="updateProgress({data : data})">
            <ion-icon name="paper"></ion-icon> Update
          </button>
        </section>
        <section *ngIf="data.statusSprint == 'On Progress'">
          <button ion-button color="light" (click)="updateProgress({data : data})">
            <ion-icon name="paper"></ion-icon> Update
          </button>
        </section>
        <section *ngIf="data.statusSprint == 'Review' && userProvider.user.is_spv == '1' ">
          <button ion-button color="light" (click)="updateProgress({data : data})">
            <ion-icon name="paper"></ion-icon> Update
          </button>
        </section>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

  
  <ion-row class="headerSprint">
    <ion-col>Claim Sprint</ion-col>
    <ion-col></ion-col>
  </ion-row>

  <ion-list [virtualScroll]="userProvider.unclaimedSprintDetailList">
    <ion-item-sliding *virtualItem="let data"> 
      <button ion-item class="ionItem" (click)="onItemPressed({data : data})"  
                [ngStyle]="{'background-color' :getColor(data.statusSprint)}">
        <ion-row>
          <ion-col style="white-space:normal" col-8>
            {{data.sprint_id}}
          </ion-col>
          <ion-col style="white-space:normal" col-4>
            {{data.duration}} Hours
          </ion-col>
        </ion-row>
      </button>
      <ion-item-options>
        <button ion-button color="light" (click)="claimSprint({data : data})">
          <ion-icon name="add-circle"></ion-icon> Claim
        </button>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

</ion-content>